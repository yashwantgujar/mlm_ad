"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const B=require("node:module"),j=require("@rollup/plugin-inject"),T=require("node-stdlib-browser"),x=require("node-stdlib-browser/helpers/rollup/plugin"),P=require("node-stdlib-browser/helpers/esbuild/plugin");var v=typeof document<"u"?document.currentScript:null;const d=l=>l&&l.__esModule?l:{default:l},S=d(j),q=d(T),O=d(P),h=(l,e)=>c(l)===c(e),s=(l,e)=>l?l===!0?!0:l===e:!1,R=l=>l.startsWith("node:"),$=l=>{const e=l.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return new RegExp(`^${e}$`)},c=l=>l.replace(/^node:/,""),p={buffer:["import __buffer_polyfill from 'vite-plugin-node-polyfills/shims/buffer'","globalThis.Buffer = globalThis.Buffer || __buffer_polyfill"],global:["import __global_polyfill from 'vite-plugin-node-polyfills/shims/global'","globalThis.global = globalThis.global || __global_polyfill"],process:["import __process_polyfill from 'vite-plugin-node-polyfills/shims/process'","globalThis.process = globalThis.process || __process_polyfill"]},w=(l={})=>{const e={include:[],exclude:[],overrides:{},protocolImports:!0,...l,globals:{Buffer:!0,global:!0,process:!0,...l.globals}},m=o=>e.include.length>0?!e.include.some(r=>h(o,r)):e.exclude.some(r=>h(o,r)),_=o=>{if(s(e.globals.Buffer,"dev")&&/^buffer$/.test(o))return"vite-plugin-node-polyfills/shims/buffer";if(s(e.globals.global,"dev")&&/^global$/.test(o))return"vite-plugin-node-polyfills/shims/global";if(s(e.globals.process,"dev")&&/^process$/.test(o))return"vite-plugin-node-polyfills/shims/process";if(o in e.overrides)return e.overrides[o]},a=Object.entries(q.default).reduce((o,[r,i])=>(!e.protocolImports&&R(r)||m(r)||(o[r]=_(c(r))||i),o),{}),u=B.createRequire(typeof document>"u"?require("url").pathToFileURL(__filename).href:v&&v.src||new URL("index.cjs",document.baseURI).href),f=[...s(e.globals.Buffer,"dev")?[u.resolve("vite-plugin-node-polyfills/shims/buffer")]:[],...s(e.globals.global,"dev")?[u.resolve("vite-plugin-node-polyfills/shims/global")]:[],...s(e.globals.process,"dev")?[u.resolve("vite-plugin-node-polyfills/shims/process")]:[]],b=[...s(e.globals.Buffer,"dev")?p.buffer:[],...s(e.globals.global,"dev")?p.global:[],...s(e.globals.process,"dev")?p.process:[],""].join(`
`);return{name:"vite-plugin-node-polyfills",config:(o,r)=>{const i=r.command==="serve",g={...s(e.globals.Buffer,"build")?{Buffer:"vite-plugin-node-polyfills/shims/buffer"}:{},...s(e.globals.global,"build")?{global:"vite-plugin-node-polyfills/shims/global"}:{},...s(e.globals.process,"build")?{process:"vite-plugin-node-polyfills/shims/process"}:{}};return{build:{rollupOptions:{onwarn:(t,n)=>{x.handleCircularDependancyWarning(t,()=>{if(o.build?.rollupOptions?.onwarn)return o.build.rollupOptions.onwarn(t,n);n(t)})},plugins:Object.keys(g).length>0?[S.default(g)]:[]}},esbuild:{banner:i?b:void 0},optimizeDeps:{exclude:[...f],esbuildOptions:{banner:i?{js:b}:void 0,define:{...i&&s(e.globals.Buffer,"dev")?{Buffer:"Buffer"}:{},...i&&s(e.globals.global,"dev")?{global:"global"}:{},...i&&s(e.globals.process,"dev")?{process:"process"}:{}},inject:[...f],plugins:[O.default(a),{name:"vite-plugin-node-polyfills-shims-resolver",setup(t){for(const n of f){const y=$(n);t.onResolve({filter:y},()=>({external:!1,path:n}))}}}]}},resolve:{alias:{...a}}}}}};exports.nodePolyfills=w;
//# sourceMappingURL=index.cjs.map
